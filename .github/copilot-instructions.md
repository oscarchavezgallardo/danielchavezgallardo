## Repo overview

This is a Hugo static site using the Blowfish theme. Key places to look:

- `config/_default/hugo.toml` — site-level Hugo config (outputs, related, sitemap, build flags).
- `config/_default/params.toml` — theme parameters (homepage, article behaviour, analytics toggles, buymeacoffee, feature flags).
- `themes/blowfish/README.md` — upstream theme docs and instructions for Tailwind/CLI/tooling.
- `layouts/_default/baseof.html` and `layouts/partials/` — main template and partials (header/footer/search logic).
- `content/` — markdown content (posts, about, index). `mainSections` is set to ["posts"].
- `assets/` and `static/` — source/static assets. `public/` contains generated site output; avoid editing `public/` directly.

## Big picture & architecture

- Static site generated by Hugo with the Blowfish theme (Tailwind CSS based). The theme supplies most UI via `themes/blowfish/*` and `layouts/` partials.
- Content is in `content/` and governed by front-matter. Presentation and feature toggles are controlled from `config/_default/params.toml` (e.g. `showTableOfContents`, `showComments`, `defaultAppearance`).
- The site uses Hugo Pipes and image processing (see `config/_default/hugo.toml` imaging settings). The template pattern often checks `site.Params` and picks partials dynamically (example: header selection in `layouts/_default/baseof.html`).

## Developer workflows (discovered from repo files)

- Local dev server (preview drafts too):

```powershell
hugo server -D
```

- Production build (outputs to `public/`):

```powershell
hugo
```

- Theme updates (Hugo modules):

```powershell
hugo mod get -u
```

- If you need to modify Tailwind/CSS or JS, check `themes/blowfish/README.md` — the theme expects Node.js tooling for building theme assets (look for a `package.json` in the theme or root). Follow the theme docs to run its build commands (e.g. `npm install && npm run build` in the theme folder) rather than re-inventing asset tooling here.

## Project-specific conventions & patterns

- Header partial selection: `layouts/_default/baseof.html` computes the header partial path with `site.Params.header.layout`, then uses `templates.Exists` to choose the partial. To change header behavior, edit `config/_default/params.toml` or add a partial under `layouts/partials/header/`.
- `mainSections` is configured to `["posts"]` in `params.toml` — this controls homepage/recent list behaviour and which content folder is highlighted.
- Draft handling: `buildDrafts` is `false` in `hugo.toml`, but the theme shows draft labels (`showDraftLabel = true`). To preview drafts locally, run the dev server with `-D`.
- Image defaults: `defaultFeaturedImage` and `defaultBackgroundImage` are set in `params.toml`; update those to change site-wide defaults.
- Analytics / external services: options for Google/Fathom/Umami/Firebase/BuyMeACoffee are present but mostly commented. Toggle them in `params.toml` — keys live there.

## Integration points and external dependencies

- Blowfish theme: primary external dependency. Refer to `themes/blowfish/README.md` for theme features and tooling (Tailwind, optional Firebase, KaTeX, Mermaid, Chart.js, client-side search with Fuse.js).
- Optional services referenced in `params.toml`: Firebase, Fathom, Umami, BuyMeACoffee, Google Analytics. These are configured via keys in `params.toml`.

## Where to make common changes (examples)

- Change site title / baseURL: `config/_default/hugo.toml`.
- Toggle appearance/dark mode: `config/_default/params.toml` keys `defaultAppearance` and `autoSwitchAppearance`.
- Customize header/footer: edit `layouts/partials/header/*` and `layouts/partials/footer.html` (base template includes them automatically).
- Add a post: add a markdown file under `content/posts/<slug>/index.md` or `content/posts/<slug>.md` with front matter; the theme will pick it up.

## Helpful examples to reference

- Header selection (dynamic): `layouts/_default/baseof.html` lines where `site.Params.header.layout` is used to build a partial path.
- Theme configuration examples: `config/_default/params.toml` shows many toggles (reading time, TOC, hero style, buymeacoffee settings).

## Do NOT edit

- `public/` — generated output. Edit source files under `content/`, `layouts/`, `assets/`, `themes/`, and `config/` instead.

## If you need more context

- Check `themes/blowfish/README.md` (theme docs) for build steps, Tailwind setup, and feature flags.
- If a new build command is required (e.g. Tailwind compilation) and you don't find `package.json` in the repo root, inspect `themes/blowfish/` for its tooling and run the theme's build steps there.

---

If any of these areas are unclear or you'd like me to add short examples for adding a post or editing a partial, tell me which topic to expand and I'll iterate.
